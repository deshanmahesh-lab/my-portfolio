<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Admin | Deshan Portfolio Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        
        :root {
            --glow-color-1: #0ea5e9;
            --glow-color-2: #6366f1;
            --glow-color-3: #a855f7;
        }

        body {
            background-color: #020617;
            color: #e2e8f0;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* index.html ‡∂ë‡∂ö‡∑ö ‡∂≠‡∑í‡∂∂‡∑î‡∂´‡∑î Aurora Background ‡∂ë‡∂ö ‡∂ë‡∂Ω‡∑ô‡∑É‡∂∏ */
        .aurora-background {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; overflow: hidden;
        }
        .aurora-background::before, .aurora-background::after {
            content: ''; position: absolute; filter: blur(100px); opacity: 0.15;
        }
        .aurora-background::before {
            background: radial-gradient(circle, var(--glow-color-1), transparent 60%);
            width: 500px; height: 500px; border-radius: 50%;
            top: -10%; left: -10%; animation: move-aurora-1 25s infinite alternate ease-in-out;
        }
        .aurora-background::after {
            background: radial-gradient(circle, var(--glow-color-3), transparent 60%);
            width: 600px; height: 600px; border-radius: 50%;
            bottom: -15%; right: -15%; animation: move-aurora-2 30s infinite alternate ease-in-out;
        }
        @keyframes move-aurora-1 { 0% { transform: translate(0, 0) scale(1); } 100% { transform: translate(80vw, 90vh) scale(1.5); } }
        @keyframes move-aurora-2 { 0% { transform: translate(0, 0) scale(1.2); } 100% { transform: translate(-90vw, -70vh) scale(0.8); } }

        /* Glass Effect */
        .glass-effect {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .form-input {
            width: 100%;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 10px;
            transition: 0.3s;
        }
        .form-input:focus {
            border-color: #0ea5e9;
            outline: none;
            box-shadow: 0 0 15px rgba(14, 165, 233, 0.2);
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s ease-in-out; }
        .tab-btn { padding-bottom: 8px; font-weight: 700; color: #94a3b8; transition: 0.3s; border-bottom: 3px solid transparent; }
        .tab-btn.active { color: #0ea5e9; border-bottom-color: #0ea5e9; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        label { color: #38bdf8; font-size: 0.7rem; font-weight: 900; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 5px; display: block; }
    </style>
</head>
<body class="p-4 md:p-10">
    <div class="aurora-background"></div>

    <div id="login-screen" class="fixed inset-0 bg-slate-950 flex items-center justify-center z-[100]">
        <div class="glass-effect p-10 rounded-3xl w-full max-w-md shadow-2xl text-center">
            <div class="mb-6">
                <div class="w-20 h-20 bg-sky-500/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-sky-500/50">
                    <i class="fa-solid fa-shield-halved text-3xl text-sky-400"></i>
                </div>
                <h2 class="text-3xl font-black text-white uppercase italic tracking-tighter">Identity Check</h2>
                <p class="text-slate-500 text-xs mt-2 uppercase font-bold">Authorized Personnel Only</p>
            </div>
            <input type="password" id="admin-pass" class="form-input text-center text-xl tracking-widest" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            <button onclick="checkPass()" class="w-full bg-sky-600 hover:bg-sky-500 py-4 rounded-xl font-black uppercase italic transition transform hover:scale-105 shadow-lg shadow-sky-900/40">Enter Dashboard</button>
        </div>
    </div>

    <div id="admin-panel" class="hidden max-w-5xl mx-auto pt-10">
        <div class="flex flex-col md:flex-row justify-between items-center mb-12 gap-4 border-b border-slate-800 pb-8">
            <h1 class="text-4xl font-black bg-clip-text text-transparent bg-gradient-to-r from-sky-400 to-indigo-500 uppercase italic">CMS Control v3.0</h1>
            <button onclick="location.reload()" class="text-slate-400 hover:text-white bg-slate-800/50 border border-slate-700 px-6 py-2 rounded-full text-xs font-black uppercase transition">Sign Out</button>
        </div>

        <div class="flex gap-10 mb-12 overflow-x-auto whitespace-nowrap scrollbar-hide pb-2">
            <button onclick="switchTab('tab-hero')" class="tab-btn active uppercase italic tracking-widest text-sm">üè† Profile Hub</button>
            <button onclick="switchTab('tab-edu')" class="tab-btn uppercase italic tracking-widest text-sm">üéì Academy History</button>
            <button onclick="switchTab('tab-proj')" class="tab-btn uppercase italic tracking-widest text-sm">üöÄ GitHub Automation</button>
        </div>

        <div id="tab-hero" class="tab-content active space-y-10">
            <div class="glass-effect p-8 rounded-3xl shadow-xl">
                <h3 class="text-white font-black mb-8 uppercase italic tracking-widest text-lg border-l-4 border-sky-500 pl-4">Core Identity</h3>
                <form id="heroForm">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div><label>Full Name</label><input type="text" id="h_name" class="form-input" required></div>
                        <div><label>Professional Headline</label><input type="text" id="h_headline" class="form-input" required></div>
                        <div><label>Direct Contact</label><input type="text" id="h_phone" class="form-input"></div>
                        <div><label>Work Email</label><input type="email" id="h_email" class="form-input"></div>
                        <div class="col-span-2"><label>Digital CV Record (Internal reference)</label><input type="text" id="h_cv" class="form-input"></div>
                        <div class="col-span-2"><label>Executive Bio</label><textarea id="h_bio" rows="4" class="form-input"></textarea></div>
                    </div>
                    <button type="submit" class="w-full bg-sky-600 py-4 rounded-xl font-black mt-6 uppercase italic shadow-lg hover:bg-sky-500 transition-all transform hover:translate-y-[-2px]">Save Changes</button>
                </form>
            </div>

            <div class="glass-effect p-8 rounded-3xl shadow-xl">
                <h3 class="font-black text-sky-400 mb-8 uppercase italic tracking-widest text-lg border-l-4 border-indigo-500 pl-4">Social Network Integration</h3>
                <form id="socialForm" class="flex flex-col md:flex-row gap-4 mb-10">
                    <div class="flex-grow">
                        <label>Target URL (GitHub, LinkedIn, etc.)</label>
                        <input type="url" id="s_url" class="form-input mb-0" placeholder="https://..." required>
                    </div>
                    <button type="submit" class="bg-indigo-600 h-[48px] mt-auto px-10 rounded-xl font-black uppercase italic hover:bg-indigo-500 transition shadow-lg shadow-indigo-900/20">Add</button>
                </form>
                <div id="social-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </div>
        </div>

        <div id="tab-edu" class="tab-content">
            <div class="glass-effect p-8 rounded-3xl shadow-xl mb-10">
                <h3 class="text-white font-black mb-8 uppercase italic tracking-widest text-lg border-l-4 border-sky-500 pl-4">Add Qualification</h3>
                <form id="eduForm" class="grid md:grid-cols-3 gap-6">
                    <div><label>Degree / Diploma</label><input type="text" id="e_title" class="form-input" placeholder="BEng (Hons)..." required></div>
                    <div><label>Institution</label><input type="text" id="e_inst" class="form-input" placeholder="University..." required></div>
                    <div><label>Duration Period</label><input type="text" id="e_year" class="form-input" placeholder="2022 - 2026" required></div>
                    <button type="submit" class="md:col-span-3 bg-sky-600 py-4 rounded-xl font-black uppercase italic hover:bg-sky-500 transition shadow-lg">Commit to Timeline</button>
                </form>
            </div>
            <div id="edu-list" class="space-y-4"></div>
        </div>

        <div id="tab-proj" class="tab-content">
            <div class="glass-effect p-12 rounded-3xl shadow-xl text-center border border-sky-500/20">
                <div class="w-24 h-24 bg-slate-900 rounded-full flex items-center justify-center mx-auto mb-8 shadow-2xl border border-slate-800">
                    <i class="fa-brands fa-github text-5xl text-sky-500"></i>
                </div>
                <h3 class="text-3xl font-black text-white mb-4 uppercase italic">Zero-Maintenance Sync</h3>
                <p class="text-slate-400 mb-10 max-w-2xl mx-auto leading-relaxed">
                    Your portfolio's projects and technical statistics are now automatically pulled from your GitHub account: <br>
                    <span class="text-sky-400 font-mono font-bold text-lg">deshanmahesh-lab</span>
                </p>
                <div class="bg-slate-950/50 p-8 rounded-3xl text-left border border-slate-800/50 max-w-2xl mx-auto">
                    <h4 class="text-xs font-black text-sky-500 uppercase mb-6 tracking-widest italic flex items-center">
                        <span class="w-2 h-2 bg-sky-500 rounded-full mr-3 animate-pulse"></span> Dynamic Content Guidelines
                    </h4>
                    <ul class="text-sm text-slate-300 space-y-4 font-medium">
                        <li class="flex items-start"><i class="fa-solid fa-circle-check text-emerald-500 mt-1 mr-3"></i> <b>Public Repositories:</b> Ensure your best work is public on GitHub to be displayed.</li>
                        <li class="flex items-start"><i class="fa-solid fa-circle-check text-emerald-500 mt-1 mr-3"></i> <b>Description Management:</b> Add descriptions and 'Topics' on GitHub to update project metadata instantly.</li>
                        <li class="flex items-start"><i class="fa-solid fa-circle-check text-emerald-500 mt-1 mr-3"></i> <b>Language Analytics:</b> Technical Contribution bar is calculated in real-time from your repository codebases.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, setDoc, getDoc, collection, addDoc, getDocs, deleteDoc, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC9EJeuno63NWQH79z29nf59p1zbko0Wwg",
            authDomain: "deshan-portfolio-aacbb.firebaseapp.com",
            projectId: "deshan-portfolio-aacbb",
            storageBucket: "deshan-portfolio-aacbb.firebasestorage.app",
            messagingSenderId: "55323696037",
            appId: "1:55323696037:web:56896fdd64bc9a28cc664c",
            measurementId: "G-K7H10VL1V4"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.checkPass = () => {
            if(document.getElementById('admin-pass').value === "deshan123") {
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('admin-panel').classList.remove('hidden');
                loadAllData();
            } else { alert("Verification Failed!"); }
        };

        window.switchTab = (id) => {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if (event) event.target.classList.add('active');
        };

        async function loadAllData() {
            const h = await getDoc(doc(db, "siteConfig", "hero"));
            if(h.exists()) {
                const d = h.data();
                document.getElementById('h_name').value = d.name || '';
                document.getElementById('h_headline').value = d.headline || '';
                document.getElementById('h_phone').value = d.phone || '';
                document.getElementById('h_email').value = d.email || '';
                document.getElementById('h_cv').value = d.cv || '';
                document.getElementById('h_bio').value = d.bio || '';
            }
            renderSocials();
            renderEdu();
        }

        document.getElementById('heroForm').onsubmit = async (e) => {
            e.preventDefault();
            await setDoc(doc(db, "siteConfig", "hero"), {
                name: document.getElementById('h_name').value,
                headline: document.getElementById('h_headline').value,
                phone: document.getElementById('h_phone').value,
                email: document.getElementById('h_email').value,
                cv: document.getElementById('h_cv').value,
                bio: document.getElementById('h_bio').value
            }, { merge: true });
            alert("Core Profile Updated!");
        };

        document.getElementById('socialForm').onsubmit = async (e) => {
            e.preventDefault();
            const url = document.getElementById('s_url').value;
            await addDoc(collection(db, "socials"), { url, timestamp: new Date() });
            document.getElementById('s_url').value = '';
            renderSocials();
        };

        async function renderSocials() {
            const snap = await getDocs(query(collection(db, "socials"), orderBy("timestamp", "asc")));
            document.getElementById('social-list').innerHTML = snap.docs.map(d => `
                <div class="bg-slate-900/50 p-4 rounded-2xl flex justify-between items-center border border-slate-800">
                    <span class="text-xs truncate max-w-[80%] font-mono text-slate-500 italic">${d.data().url}</span>
                    <button class="text-red-400 hover:bg-red-500/10 w-8 h-8 rounded-lg transition" onclick="deleteSocial('${d.id}')">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </div>`).join('');
        }
        window.deleteSocial = async (id) => { if(confirm("Remove this link?")) { await deleteDoc(doc(db, "socials", id)); renderSocials(); } };

        document.getElementById('eduForm').onsubmit = async (e) => {
            e.preventDefault();
            await addDoc(collection(db, "education"), {
                title: document.getElementById('e_title').value,
                inst: document.getElementById('e_inst').value,
                year: document.getElementById('e_year').value,
                timestamp: new Date()
            });
            renderEdu(); e.target.reset();
        };

        async function renderEdu() {
            const snap = await getDocs(query(collection(db, "education"), orderBy("timestamp", "desc")));
            document.getElementById('edu-list').innerHTML = snap.docs.map(d => `
                <div class="glass-effect p-6 rounded-2xl flex justify-between border border-slate-700/50">
                    <div>
                        <h4 class="font-bold text-white uppercase italic">${d.data().title}</h4>
                        <p class="text-sm text-slate-400">${d.data().inst} (${d.data().year})</p>
                    </div>
                    <button class="text-red-400 hover:bg-red-500/10 w-10 h-10 rounded-xl transition" onclick="deleteEdu('${d.id}')">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </div>`).join('');
        }
        window.deleteEdu = async (id) => { if(confirm("Remove this record?")) { await deleteDoc(doc(db, "education", id)); renderEdu(); } };
    </script>
</body>
</html>